---
title: "Receiving In-App Purchase Notifications"
description: "In this topic, you will learn the requirements for setting up an endpoint to receive in-app purchase notifications."
parent: "General"
grandparent: "Monetization"
layout: "staging"
---
<h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Overview">Overview</h2>
    <p>There are two types of purchases that can be done with Beacon, those being:</p>
    <ul>
      <li>Purchases done outside Beacon - For those purchases a webhook/API is supported that allows external systems to notify Beacon of any purchases related events. This enables the Beacon entitlement subsystem to properly make assets available to viewers.</li>
      <li>Purchases executed through Beacon - Of course, the Beacon entitlement subsystem still makes assets available to viewers. Also available are notifications that are sent to the seller of the asset. This permits the asset supplier to display to the purchaser, via the external store, that a purchase has been made.</li>
    </ul>
    <p>An example of a purchase through Beacon is:</p>
    <ul>
      <li>A viewer purchases a subscription from ????? as an in-app purchase in Beacon.</li>
      <li>The Beacon entitlement subsystem grants the viewer to access all video assets in the subscription.</li>
      <li>A notification is sent to ??????</li>
      <li>????? then uses the information in the notification to display to the viewer the subscription was purchased.</li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="How_notifications_are_implemented">How notifications are implemented</h2>
    <p>Here is a high-level diagram of the process:</p>
    <figure class="bcls-figure">
      <img class="bcls-image" src="/assets/images/monetization/receive-iap-notifications/overview-beacon-in-app-purchase.png" alt="overview beacon in app purchase">
    </figure>
    <p>Amazon Simple Notification Service (Amazon SNS) is a managed service that provides message delivery from publishers to subscribers. For full details see Amazon's <a href="https://docs.aws.amazon.com/sns/latest/dg/welcome.html">SNS Developer Guide</a>.</p>
  </section>

  <section class="bcls-section">
    <h2 id="Notification_specifications">Notification specifications</h2>
    <ul>
      <li>Notifications of In App purchases from following stores will be supported:
        <ul>
          <li>Apple store (iOS and AppleTV)</li>
          <li>Google Play (Android and Android TV)</li>
          <li>Roku store</li>
          <li>Amazon store (FireTV)</li>
          <li>Stripe (Web and Samsung TV)</li>
        </ul>
      </li>
      <li>Beacon will report all purchase related events, including the following actions on subscriptions:
        <ul>
          <li>New</li>
          <li>Renewals</li>
          <li>Cancellations</li>
          <li>Pauses</li>
          <li>Holds</li>
          <li>Resumes</li>
        </ul>
      </li>
      <li>Enough information is provided in the notification so the seller's external system is able to apply entitlements and/or prevent purchases of same asset (subscription) if already purchased through Beacon or native stores.</li>
      <li>Purchase events are delivered to external stores within 5 min after receiving notification from source stores.</li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="section-name">section-title</h2>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Required</th>
          <th>Possible Values</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>notification_type</td>
          <td>String</td>
          <td>Always</td>
          <td>new, renew, cancel, pause, hold, resume</td>
          <td>
            <li>new - will be issued for a new subscription</li>
            <li>renew - will be used to renew an existing subscription (extend the subscription)</li>
            <li>cancel - will cancel an existing purchase</li>
            <li>hold - subscription was put on hold due to non payment</li>
            <li>pause - subscription is paused by user</li>
            <li>resume - subscription transition from hold or pause to continue</li>
          </td>
        </tr>
        <tr>
          <td>external_user_id</td>
          <td>String</td>
          <td>Always</td>
          <td></td>
          <td>This is the id that is commonly used by Beacon and the external store to identify the user</td>
        </tr>
        <tr>
          <td>transaction_id</td>
          <td>String</td>
          <td>Always</td>
          <td></td>
          <td>Unique identifier for the transaction. When a cancellation is done, this id should be used to cancel the subscription or individual purchase. When a subscription is renewed, resumed, paused or put on hold, this id is used to find the specific subscription that is affected</td>
        </tr>
        <tr>
          <td>start_date</td>
          <td>integer</td>
          <td>Yes with the exception of cancellation notifications</td>
          <td></td>
          <td>The date when the purchase is in effect and entitlements to user should start</td>
        </tr>
        <tr>
          <td>end_date</td>
          <td>integer</td>
          <td>Required for these notification types: new, renew, cancel and resume</td>
          <td></td>
          <td>The date when the purchase is no longer in effect and entitlements to user should end. For cancellation requests, the end_date defines when the user loses access to the content</td>
        </tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
      </tbody>
    </table>
  </section>



</article>